<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 1.2.0">
<meta name="crystal_docs.project_version" content="master">
<meta name="crystal_docs.project_name" content="medup">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="medup">
  <title>medup master</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          medup
        </a>
      </h1>

      <span class="project-version">
        master
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="medup/Medium" data-name="medium">
      <a href="Medium.html">Medium</a>
      
        <ul>
  
  <li class="parent " data-id="medup/Medium/Client" data-name="medium::client">
      <a href="Medium/Client.html">Client</a>
      
        <ul>
  
  <li class=" " data-id="medup/Medium/Client/Collections" data-name="medium::client::collections">
      <a href="Medium/Client/Collections.html">Collections</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Client/Media" data-name="medium::client::media">
      <a href="Medium/Client/Media.html">Media</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Client/Posts" data-name="medium::client::posts">
      <a href="Medium/Client/Posts.html">Posts</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Client/Publications" data-name="medium::client::publications">
      <a href="Medium/Client/Publications.html">Publications</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Client/Users" data-name="medium::client::users">
      <a href="Medium/Client/Users.html">Users</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="medup/Medium/ClientError" data-name="medium::clienterror">
      <a href="Medium/ClientError.html">ClientError</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Connection" data-name="medium::connection">
      <a href="Medium/Connection.html">Connection</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/ConnectionAPI" data-name="medium::connectionapi">
      <a href="Medium/ConnectionAPI.html">ConnectionAPI</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Error" data-name="medium::error">
      <a href="Medium/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/ParagraphMetadata" data-name="medium::paragraphmetadata">
      <a href="Medium/ParagraphMetadata.html">ParagraphMetadata</a>
      
    </li>
  
  <li class="parent " data-id="medup/Medium/Post" data-name="medium::post">
      <a href="Medium/Post.html">Post</a>
      
        <ul>
  
  <li class="parent " data-id="medup/Medium/Post/Paragraph" data-name="medium::post::paragraph">
      <a href="Medium/Post/Paragraph.html">Paragraph</a>
      
        <ul>
  
  <li class=" " data-id="medup/Medium/Post/Paragraph/DropCapImage" data-name="medium::post::paragraph::dropcapimage">
      <a href="Medium/Post/Paragraph/DropCapImage.html">DropCapImage</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Post/Paragraph/Iframe" data-name="medium::post::paragraph::iframe">
      <a href="Medium/Post/Paragraph/Iframe.html">Iframe</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Post/Paragraph/MixtapeMetadata" data-name="medium::post::paragraph::mixtapemetadata">
      <a href="Medium/Post/Paragraph/MixtapeMetadata.html">MixtapeMetadata</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/Post/Paragraph/ParagraphMarkup" data-name="medium::post::paragraph::paragraphmarkup">
      <a href="Medium/Post/Paragraph/ParagraphMarkup.html">ParagraphMarkup</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="medup/Medium/Post/Tag" data-name="medium::post::tag">
      <a href="Medium/Post/Tag.html">Tag</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="medup/Medium/PostBodyModel" data-name="medium::postbodymodel">
      <a href="Medium/PostBodyModel.html">PostBodyModel</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/PostContent" data-name="medium::postcontent">
      <a href="Medium/PostContent.html">PostContent</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/PostVirtuals" data-name="medium::postvirtuals">
      <a href="Medium/PostVirtuals.html">PostVirtuals</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/ServerError" data-name="medium::servererror">
      <a href="Medium/ServerError.html">ServerError</a>
      
    </li>
  
  <li class=" " data-id="medup/Medium/User" data-name="medium::user">
      <a href="Medium/User.html">User</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="medup/Medup" data-name="medup">
      <a href="Medup.html">Medup</a>
      
        <ul>
  
  <li class=" " data-id="medup/Medup/Command" data-name="medup::command">
      <a href="Medup/Command.html">Command</a>
      
    </li>
  
  <li class=" " data-id="medup/Medup/Options" data-name="medup::options">
      <a href="Medup/Options.html">Options</a>
      
    </li>
  
  <li class=" " data-id="medup/Medup/Tool" data-name="medup::tool">
      <a href="Medup/Tool.html">Tool</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<p><img src="./img/logo.svg" alt="Logo" /></p>
<h1><a id="medup" class="anchor" href="#medup">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Medup</h1>
<p><a href="https://github.com/miry/medup/releases"><img src="https://img.shields.io/github/release/miry/medup.svg?style=flat" alt="" /></a>
<a href="https://raw.githubusercontent.com/miry/medup/master/LICENSE"><img src="https://img.shields.io/github/license/miry/medup" alt="" /></a></p>
<blockquote>
<p>Sync all content from Medium with local folder via API</p>
</blockquote>
<h1><a id="table-of-contents" class="anchor" href="#table-of-contents">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Table of Contents</h1>
<ul>
<li><a href="#usage">Usage</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#license">License</a></li>
</ul>
<h1><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h1>
<h2><a id="export-post" class="anchor" href="#export-post">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Export post</h2>
<p>Export a single medium post to local</p>
<pre><code class="language-shell">medup https://medium.com/notes-and-tips-in-full-stack-development/medup-backups-articles-8bf90179b094</code></pre>
<h2><a id="authors-posts" class="anchor" href="#authors-posts">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Author's posts</h2>
<p>Export all articles written by single author to special folder <code>posts/miry</code></p>
<pre><code class="language-shell">medium -u miry -d posts/miry</code></pre>
<h2><a id="publications-posts" class="anchor" href="#publications-posts">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Publication's posts</h2>
<p>Export all articles written by single author to special folder <code>posts/miry</code></p>
<pre><code class="language-shell">medium -p jetthoughts -d posts/jetthoughts</code></pre>
<h2><a id="users-recommendations" class="anchor" href="#users-recommendations">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>User's recommendations</h2>
<p>Export all articles recommended by <code>miry</code>:</p>
<pre><code class="language-shell">medium -u miry -d posts/recommendations -r</code></pre>
<h1><a id="features" class="anchor" href="#features">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Features</h1>
<ul>
<li>Discover all articles from user account available in public</li>
<li>Allow to download all recommended articles by user</li>
<li>Download images used inside article</li>
<li>Save posts in markdown format</li>
<li>Convert a single article in markdown format</li>
</ul>
<h1><a id="getting-started" class="anchor" href="#getting-started">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Getting Started</h1>
<h2><a id="homebrew" class="anchor" href="#homebrew">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Homebrew</h2>
<p>Install <code>medup</code> tool to the MacOS or Linux via Hombrew:</p>
<pre><code class="language-shell">$ brew tap miry/medup
$ brew install medup</code></pre>
<p>Run export command for <strong>Medium</strong> author <em>miry</em> and save articles to local folder:</p>
<pre><code class="language-shell">$ medup -u miry -d .
$ medup -d . https://medium.com/notes-and-tips-in-full-stack-development/medup-backups-articles-8bf90179b094</code></pre>
<h2><a id="docker" class="anchor" href="#docker">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Docker</h2>
<p>Docker way to make same job:</p>
<pre><code class="language-shell">$ docker run -v &lt;path to local articles folder&gt;:/posts -it miry/medup -u &lt;user&gt;</code></pre>
<p>Download all articles that user has recommended:</p>
<pre><code class="language-shell">$ docker run -v &lt;path to local articles folder&gt;:/posts -it miry/medup -u &lt;user&gt; --recommended -d posts/recommended</code></pre>
<h2><a id="crystal" class="anchor" href="#crystal">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Crystal</h2>
<p>Run dumping with source code</p>
<pre><code class="language-shell">$ shards install
$ crystal run src/cli.cr -- -u &lt;medium user&gt; -d &lt;destination folder&gt;</code></pre>
<p>Example download all posts from author https://medium.com/@miry to local folder <code>posts/miry</code></p>
<pre><code class="language-shell">$ crystal run src/cli.cr -- -u miry -d posts/miry</code></pre>
<h2><a id="build" class="anchor" href="#build">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Build</h2>
<p>Build a application binary and execute:</p>
<pre><code class="language-shell">$ shards install
$ rake build
$ _output/medup -u &lt;medium user&gt; -d &lt;destination folder&gt;</code></pre>
<h1><a id="result" class="anchor" href="#result">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Result</h1>
<p>By default all articles destination folder is <code>posts</code>.</p>
<p>In the directory, you can find 2 format of files: <code>.json</code> and <code>.md</code>.</p>
<ul>
<li><em>JSON</em> format is the raw, what <em>Medium</em> returns.</li>
<li><em>Markdown</em> format is simple implementation of block formated text.</li>
</ul>
<p>Images encoded in the result document.
<code>IFRAME</code> content are located in <code>posts/assets</code>.</p>
<h2><a id="markdown" class="anchor" href="#markdown">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Markdown</h2>
<p>Example of exported document (Original Medium post vs Exported Markdown):</p>
<p><img src="./img/compare.png" alt="" /></p>
<h1><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h1>
<ol>
<li>Fork it ( https://github.com/miry/medup/fork )</li>
<li>Create your feature branch (git checkout -b my-new-feature)</li>
<li>Commit your changes (git commit -am 'Add some feature')</li>
<li>Push to the branch (git push origin my-new-feature)</li>
<li>Create a new Pull Request</li>
</ol>
<h1><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h1>
<ul>
<li><a href="https://github.com/miry">@miry</a> Michael Nikitochkin - creator, maintainer</li>
<li><a href="https://github.com/alexanderadam">@alexanderadam</a> Alexander - supporter</li>
</ul>
<h1><a id="license" class="anchor" href="#license">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>License</h1>
<p>This project is under the LGPL-3.0 license.</p>
<h1><a id="play-ownself" class="anchor" href="#play-ownself">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Play ownself</h1>
<h3><a id="medium-api" class="anchor" href="#medium-api">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Medium API</h3>
<ol>
<li>
<p><a href="https://github.com/Medium/medium-api-docs">Medium API documentation</a></p>
</li>
<li>
<p>Generate token on the page https://medium.com/me/settings</p>
</li>
<li>
<p>Create environment variable <code>MEDIUM_TOKEN=&lt;token&gt;</code></p>
</li>
<li>
<p>Verify token with sample query:</p>
</li>
</ol>
<pre><code class="language-shell">$ curl -H &quot;Authorization: Bearer &lt;token&gt;&quot; https://api.medium.com/v1/me
{&quot;data&quot;:{&quot;id&quot;:&quot;number&quot;,&quot;username&quot;:&quot;miry&quot;,&quot;name&quot;:&quot;Michael Nikitochkin&quot;,&quot;url&quot;:&quot;https://medium.com/@miry&quot;,&quot;imageUrl&quot;:&quot;https://cdn-images-1.medium.com/fit/c/400/400/0*KgbjgGnH-csHuB8j.&quot;}}</code></pre>
<h3><a id="crawler" class="anchor" href="#crawler">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Crawler</h3>
<ol>
<li>Check public information not covered by API</li>
</ol>
<pre><code class="language-shell">$ curl &quot;https://medium.com/@miry?format=json&quot; | cut -c17- &amp;&amp; : Remove in the front from response some strange JS code.</code></pre>
<ol start="2">
<li>Pagination</li>
</ol>
<pre><code class="language-shell">$ curl &quot;https://medium.com/@miry/latest?format=json&amp;limit=100&quot; | cut -c17- &amp;&amp; : Remove in the front from response some strange JS code.</code></pre>
<ol start="3">
<li>Post info</li>
</ol>
<pre><code class="language-shell">curl -s -H &quot;Content-Type: application/json&quot; https://medium.com/@miry/c35b40c499e\?format\=json\&amp;limit\=100</code></pre>
<ol start="4">
<li>Stream</li>
</ol>
<pre><code class="language-shell">$ curl -s -H &quot;Content-Type: application/json&quot; &quot;https://medium.com/_/api/users/fdf238948af6/profile/stream?source=overview&quot; | cut -c17-
$ curl -s -H &quot;Content-Type: application/json&quot; &quot;https://medium.com/_/api/users/fdf238948af6/profile/stream?limit=100&amp;page=3&quot; | cut -c17- &gt; stream.json
$ cat stream.json| jq &quot;.payload.references.Post[].title&quot;
$ cat stream.json| jq &quot;.payload.paging.next&quot;</code></pre>
<ol start="5">
<li>Recommendations</li>
</ol>
<pre><code class="language-shell">$ curl -s -H &quot;Content-Type: application/json&quot; https://medium.com/@miry/has-recommended | cut -c17-
$ curl -s -H &quot;Content-Type: application/json&quot; &quot;https://medium.com/_/api/users/fdf238948af6/profile/stream?source=has-recommended&quot; | cut -c17-</code></pre>
</div>
</body>
</html>
